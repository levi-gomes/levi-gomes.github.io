<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/site.webmanifest"/><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#000000"/><meta name="msapplication-TileColor" content="#2b5797"/><meta name="theme-color" content="#ffffff"/><meta name="google-site-verification" content="oliS-hJhDV0wCNFfVhfAC0igKcuVEDSj6XCaqtuSwQA"/><script src="/js/mode.js"></script><title>Metroidvania Devlog 1: Networking Solutions | How I Made A Game</title><script id="giscus-script" src="https://giscus.app/client.js" data-repo="levimcgomes/levimcgomes.github.io" data-repo-id="R_kgDOH_rqaA" data-category="Blog Comments" data-category-id="DIC_kwDOH_rqaM4CVNZX" data-mapping="pathname" data-strict="0" data-reactions-enabled="1" data-emit-metadata="1" data-input-position="top" data-theme="dark-dimmed" data-lang="en" crossorigin="anonymous" async=""></script><meta name="next-head-count" content="13"/><link rel="preload" href="https://cdn.statically.io/gh/levi-gomes/levi-gomes.github.io/gh-pages/_next/static/css/cb4fb34b3c47d557.css" as="style"/><link rel="stylesheet" href="https://cdn.statically.io/gh/levi-gomes/levi-gomes.github.io/gh-pages/_next/static/css/cb4fb34b3c47d557.css" data-n-g=""/><link rel="preload" href="https://cdn.statically.io/gh/levi-gomes/levi-gomes.github.io/gh-pages/_next/static/css/28cea9dbbca02b72.css" as="style"/><link rel="stylesheet" href="https://cdn.statically.io/gh/levi-gomes/levi-gomes.github.io/gh-pages/_next/static/css/28cea9dbbca02b72.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="https://cdn.statically.io/gh/levi-gomes/levi-gomes.github.io/gh-pages/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="https://cdn.statically.io/gh/levi-gomes/levi-gomes.github.io/gh-pages/_next/static/chunks/webpack-74ef5a84c939c88d.js" defer=""></script><script src="https://cdn.statically.io/gh/levi-gomes/levi-gomes.github.io/gh-pages/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="https://cdn.statically.io/gh/levi-gomes/levi-gomes.github.io/gh-pages/_next/static/chunks/main-18053c3f67c4d467.js" defer=""></script><script src="https://cdn.statically.io/gh/levi-gomes/levi-gomes.github.io/gh-pages/_next/static/chunks/pages/_app-4862d28c0e85fdc0.js" defer=""></script><script src="https://cdn.statically.io/gh/levi-gomes/levi-gomes.github.io/gh-pages/_next/static/chunks/175675d1-370b5e3106085c09.js" defer=""></script><script src="https://cdn.statically.io/gh/levi-gomes/levi-gomes.github.io/gh-pages/_next/static/chunks/b5f2ed29-b0b5179426d9fdcf.js" defer=""></script><script src="https://cdn.statically.io/gh/levi-gomes/levi-gomes.github.io/gh-pages/_next/static/chunks/pages/blog/%5Bslug%5D-ecd2c457fac278ec.js" defer=""></script><script src="https://cdn.statically.io/gh/levi-gomes/levi-gomes.github.io/gh-pages/_next/static/6mMz-qf_fL3263ZGbycZE/_buildManifest.js" defer=""></script><script src="https://cdn.statically.io/gh/levi-gomes/levi-gomes.github.io/gh-pages/_next/static/6mMz-qf_fL3263ZGbycZE/_ssgManifest.js" defer=""></script></head><body><div id="__next"><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-4XQ38SS8N1"></script><script src="/js/gtag.js"></script><div class="header-container"><h2 href="/">How I Made A Game</h2><div><a href="/#about">About</a><a href="/archive">All Posts</a><a href="/">Home</a><button class="theme-toggle"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="#FFFFFF" style="cursor:pointer;transform:rotate(40deg)"><mask id="myMask2"><rect x="0" y="0" width="100%" height="100%" fill="white"></rect><circle style="cx:12px;cy:4px" r="9" fill="black"></circle></mask><circle cx="12" cy="12" style="r:9px" fill="white" mask="url(#myMask2)"></circle><g stroke="white" style="opacity:0"><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></g></svg></button></div></div><main class="page"><div align="right"><a class="btn-back"><span>Go Back</span></a></div><div class="post-page"><h1 class="post-title">Metroidvania Devlog 1: Networking Solutions</h1><img class="post-full-image" src="../images/posts/metroidvania/devlog1_cover.png" alt=""/><div class="post-date">6/1/2023</div><div class="post-tags"><div class="post-tag">metroidvania</div><div class="post-tag">devlog</div><div class="post-tag">Unity</div><div class="post-tag">multiplayer</div></div><div class="post-body"><div><p>As I mentioned in the last post, choosing the networking solution was quite an arduous task. So let's take a look at all the options I considered.</p>
<h3>Steam</h3>
<p>Steam seems like the obvious one. I mean, who doesn't play Steam games, am I right? They provide the Steamworks SDK, which smoothly deals with networking so you don't have to. However, there's a massive catch. It only works if you publish your game on Steam, and Steam only. &quot;Alright, not that big of a deal, just publish on Steam&quot; is what one might naïvely say. Why naïvely? Did you know that they charge 100$ to publish a game? Yes, you read that right. Yes, it's way too much. Yes, people do publish games on Steam anyway. And no, I don't have 100$ to spend, Steam. So that one's off the table.</p>
<h3>Netcode for GameObjects</h3>
<p>The next idea that crossed my mind was to try whatever Unity offered for multiplayer. Turns out, they have Netcode for GameObjects (NGO), a high level multiplayer solution made just for GameObjects. It seemed pretty good, so I watched some <a href="https://www.youtube.com/playlist?list=PLQMQNmwN3FvyyeI1-bDcBPmZiSaDMbFTi">tutorials</a> (this playlist by Dilmer Valecillos is really good), but soon I realized something: NATs and routers are a thing. And, from a game programmer's perspective, they serve the single purpose of making things hard (but only from a game programmer's perspective - those things are very important). Don't worry, I thought, I'm sure Unity can do NAT punchthrough. It can't. Don't worry, I'm sure someone has made something to do NAT punchthrough in NGO. No one did. This means I�d need relays, but those things are paid (mostly). So, I started digging around.</p>
<h3>Epic Online Services</h3>
<p>In my seemingly endless search I stumbled upon Epic Online Services (EOS). A free-to-use engine and shop agnostic networking layer with all the modern commodities such as:</p>
<ul>
<li>authentication (Epic Account Services)</li>
<li>lobbies</li>
<li>free relays</li>
</ul>
<p>All this based on the infrastructure they used for Fortnite. It sounds almost too good to be true. Well, it was, in its own way. I couldn't even get their samples to work (which was probably my bad, but if I'm not skilled enough to make a sample work I'm not skilled enough to use it), and integrating it with Unity looked like it was going to be a lot of work. Another one bites the dust.</p>
<h3>Mirror</h3>
<p>Finally, I found <a href="https://mirror-networking.gitbook.io/docs/">Mirror</a>. I could start to see the light at the end of the tunnel. Mirror provides a high-level API integrating directly with Unity, based off Unity's UNet. And let me tell you, Mirror is straight up amazing. It uses a lower-level system, Transports, to actually handle network connections and messaging. And Transports are fully modular, so I just needed to find the right transport for my needs, and I'd be all set. So, how hard could be finding a transport be? Mirror's <a href="https://mirror-networking.gitbook.io/docs/transports">documentation page</a> about transports says the following:</p>
<ul>
<li><strong>Built-in Transports - These transports are included with Mirror.</strong>
<ul>
<li><strong>KCP</strong> - UDP transport based on kcp.c, line-by-line translation to C#</li>
<li><strong>Telepathy</strong> - Simple, message based, MMO Scale TCP networking in C#. And no magic.</li>
<li><strong>Simple Web Sockets</strong> - WebGL transport layer for Mirror that target browser clients.</li>
<li><strong>Multiplexer</strong> - Bridging transport to allow a server to handle clients on different transports concurrently, for example desktop clients using Telepathy together with WebGL clients using Websockets.</li>
<li><strong>Latency Simulation</strong> - Middleman transport to test non-ideal network conditions</li>
</ul>
</li>
<li><strong>Additional Transports - These transports are maintained by third parties outside of Mirror.</strong>
<ul>
<li><strong>Monke</strong> - plug and play encrypted middleman transport layer for mirror.</li>
<li><strong>Ignorance</strong> - reliable and unreliable sequenced UDP transport based on ENet.</li>
<li><strong>LiteNetLibTransport</strong> - UDP transport based on LiteNetLib.</li>
</ul>
</li>
<li><strong>Relay Transports</strong> - These transports are maintained by third parties and use relay infrastructure to connect clients to servers behind firewalls / NAT.
<ul>
<li><strong>Steam - FizzySteamworks</strong> - Transport utilizing Steam P2P network, building on Steamworks.NET.</li>
<li><strong>Steam - FizzyFacepunch</strong> - Transport utilizing Steam P2P network, building on Facepunch.Steamworks.</li>
<li><strong>Epic</strong> - Epic Online Services - Relay transport utilizing Epic's free relay service.</li>
<li><strong>LRM</strong> - Light Reflective Mirror - Relay transport for WebGL clients.</li>
<li><strong>OculusP2P</strong> - Oculus Platform - Relay Transport for Oculus Quest 1 &amp; 2.</li>
</ul>
</li>
</ul>
<p>The 'Relay Transports' section should have plenty to pick from. However, it has two Steam transports, one Epic transport, one transport for WebGL and one for Oculus Quest. Nothing good for me.</p>
<h3>Discord GameSDK</h3>
<p>I honestly thought this was it. Discord GameSDK is (as of now) a very good tool. It manages accounts for me, creates lobbies and connects players to them. And integrating it with Mirror was certainly possible. It had been done. Although <a href="https://github.com/Derek-R-S/Discord-Mirror">DiscordMirror</a> was outdated and didn't work in the best of ways, it was a proof of concept. So I got working, trying to make a transport for Mirror using Discord GameSDK. That was when I read this message on Discord GameSDK's official Discord server:</p>
<figure>
                <img src = "../images/posts/metroidvania/DiscordGameSDK_feature_remmoval.png" alt = "The message." style = "width:100%" />
                <figcaption><strong></strong>The message.</figcaption>
            </figure > <p>They are removing more than half of the SDK's features in five months. I truly don't know how they think this is a good idea, but it means I can't use it.</p>
<h3>Back to the future... I mean, to EOS</h3>
<p>After getting very mad at Discord, for what they did, I figured I'd better find something else. So I gave EOS another chance. There's a transport made for it already, so it won't be nearly as hard. It has a whole new cast of problems, but I can (hopefully) figure it out. For instance, authentication is quite the headache. That's to say, I'm not over with networking yet, which means you'll be seeing more posts about it, but after all this I needed a break.</p>
<h3></h3>
<p>The next post was going to be about how I made a transport using Discord GameSDK, but that'd be useless now. The next post will instead be about <strong>the actual game</strong>! You never thought you'd see this day coming, did you? Next time we'll delve deep into the workings of the character controller, so I hope you'll be here to read it. Until then, stay well and goodbye!</p>
</div></div></div><div class="giscus"></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontmatter":{"title":"Metroidvania Devlog 1: Networking Solutions","date":"6/1/2023","cover_image":"images/posts/metroidvania/devlog1_cover.png","tags":["metroidvania","devlog","Unity","multiplayer"],"excerpt":"As I mentioned in the last post, choosing the networking solution was quite a arduous task. So let's take a look at all the options I considered."},"slug":"metroidvania_devlog1","content":"\nAs I mentioned in the last post, choosing the networking solution was quite an arduous task. So let's take a look at all the options I considered.\n\n### Steam\nSteam seems like the obvious one. I mean, who doesn't play Steam games, am I right? They provide the Steamworks SDK, which smoothly deals with networking so you don't have to. However, there's a massive catch. It only works if you publish your game on Steam, and Steam only. \"Alright, not that big of a deal, just publish on Steam\" is what one might na\u0026#239;vely say. Why na\u0026#239;vely? Did you know that they charge 100$ to publish a game? Yes, you read that right. Yes, it's way too much. Yes, people do publish games on Steam anyway. And no, I don't have 100$ to spend, Steam. So that one's off the table.\n\n### Netcode for GameObjects\nThe next idea that crossed my mind was to try whatever Unity offered for multiplayer. Turns out, they have Netcode for GameObjects (NGO), a high level multiplayer solution made just for GameObjects. It seemed pretty good, so I watched some [tutorials](https://www.youtube.com/playlist?list=PLQMQNmwN3FvyyeI1-bDcBPmZiSaDMbFTi) (this playlist by Dilmer Valecillos is really good), but soon I realized something: NATs and routers are a thing. And, from a game programmer's perspective, they serve the single purpose of making things hard (but only from a game programmer's perspective - those things are very important). Don't worry, I thought, I'm sure Unity can do NAT punchthrough. It can't. Don't worry, I'm sure someone has made something to do NAT punchthrough in NGO. No one did. This means I�d need relays, but those things are paid (mostly). So, I started digging around.\n\n### Epic Online Services\nIn my seemingly endless search I stumbled upon Epic Online Services (EOS). A free-to-use engine and shop agnostic networking layer with all the modern commodities such as:\n - authentication (Epic Account Services)\n - lobbies\n - free relays\n\n All this based on the infrastructure they used for Fortnite. It sounds almost too good to be true. Well, it was, in its own way. I couldn't even get their samples to work (which was probably my bad, but if I'm not skilled enough to make a sample work I'm not skilled enough to use it), and integrating it with Unity looked like it was going to be a lot of work. Another one bites the dust.\n\n ### Mirror\n Finally, I found [Mirror](https://mirror-networking.gitbook.io/docs/). I could start to see the light at the end of the tunnel. Mirror provides a high-level API integrating directly with Unity, based off Unity's UNet. And let me tell you, Mirror is straight up amazing. It uses a lower-level system, Transports, to actually handle network connections and messaging. And Transports are fully modular, so I just needed to find the right transport for my needs, and I'd be all set. So, how hard could be finding a transport be? Mirror's [documentation page](https://mirror-networking.gitbook.io/docs/transports) about transports says the following:\n\n\n - **Built-in Transports - These transports are included with Mirror.**\n    - **KCP** - UDP transport based on kcp.c, line-by-line translation to C#\n\t- **Telepathy** - Simple, message based, MMO Scale TCP networking in C#. And no magic.\n    - **Simple Web Sockets** - WebGL transport layer for Mirror that target browser clients.\n    - **Multiplexer** - Bridging transport to allow a server to handle clients on different transports concurrently, for example desktop clients using Telepathy together with WebGL clients using Websockets.\n    - **Latency Simulation** - Middleman transport to test non-ideal network conditions\n - **Additional Transports - These transports are maintained by third parties outside of Mirror.**\n    - **Monke** - plug and play encrypted middleman transport layer for mirror.\n    - **Ignorance** - reliable and unreliable sequenced UDP transport based on ENet.\n    - **LiteNetLibTransport** - UDP transport based on LiteNetLib.\n - **Relay Transports** - These transports are maintained by third parties and use relay infrastructure to connect clients to servers behind firewalls / NAT.\n    - **Steam - FizzySteamworks** - Transport utilizing Steam P2P network, building on Steamworks.NET.\n    - **Steam - FizzyFacepunch** - Transport utilizing Steam P2P network, building on Facepunch.Steamworks.\n    - **Epic** - Epic Online Services - Relay transport utilizing Epic's free relay service.\n    - **LRM** - Light Reflective Mirror - Relay transport for WebGL clients.\n    - **OculusP2P** - Oculus Platform - Relay Transport for Oculus Quest 1 \u0026 2.\n\nThe 'Relay Transports' section should have plenty to pick from. However, it has two Steam transports, one Epic transport, one transport for WebGL and one for Oculus Quest. Nothing good for me.\n\n### Discord GameSDK\nI honestly thought this was it. Discord GameSDK is (as of now) a very good tool. It manages accounts for me, creates lobbies and connects players to them. And integrating it with Mirror was certainly possible. It had been done. Although [DiscordMirror](https://github.com/Derek-R-S/Discord-Mirror) was outdated and didn't work in the best of ways, it was a proof of concept. So I got working, trying to make a transport for Mirror using Discord GameSDK. That was when I read this message on Discord GameSDK's official Discord server:\n\u0026\u0026\u0026img[images/posts/metroidvania/DiscordGameSDK_feature_remmoval.png]()The message.\n\u0026\u0026\u0026\nThey are removing more than half of the SDK's features in five months. I truly don't know how they think this is a good idea, but it means I can't use it.\n\n### Back to the future... I mean, to EOS\nAfter getting very mad at Discord, for what they did, I figured I'd better find something else. So I gave EOS another chance. There's a transport made for it already, so it won't be nearly as hard. It has a whole new cast of problems, but I can (hopefully) figure it out. For instance, authentication is quite the headache. That's to say, I'm not over with networking yet, which means you'll be seeing more posts about it, but after all this I needed a break.\n\n###\nThe next post was going to be about how I made a transport using Discord GameSDK, but that'd be useless now. The next post will instead be about **the actual game**! You never thought you'd see this day coming, did you? Next time we'll delve deep into the workings of the character controller, so I hope you'll be here to read it. Until then, stay well and goodbye!"},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"metroidvania_devlog1"},"buildId":"6mMz-qf_fL3263ZGbycZE","assetPrefix":"https://cdn.statically.io/gh/levi-gomes/levi-gomes.github.io/gh-pages","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>